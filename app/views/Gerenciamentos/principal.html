#{extends 'main.html' /}
#{set title:'Lista de Restaurantes' /}
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /*
        |==========================================================================
        | 0. VARIÁVEIS DE TEMA
        |==========================================================================
        */
        :root {
            --primary-color: #A34E2B; 
            --secondary-color: #D4A373; 
            --tertiary-color: #333333; 
            --background-light: #FFFFFF; 
            --gradient-start: #FCF7EE; 
            --gradient-end: #F5E8D8;    
            --text-dark: #333333; 
            --text-light: #FFFFFF; 
            --button-hover: #8F3E22; 
            --line-color: #E0D3C7; 
            --acessar-btn-bg: var(--primary-color);
            --acessar-btn-hover: var(--button-hover);
            --favoritar-star: #FFD700; 
            --cadastrar-btn-bg: var(--primary-color); 
            --cadastrar-btn-hover: var(--button-hover);
        }

        /*
        |==========================================================================
        | 1. ESTILOS DE CORPO E MENU 
        |==========================================================================
        */
        body {
            padding-top: 65px; /* Libera espaço para o menu fixo */
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            background: linear-gradient(to bottom, var(--gradient-start), var(--gradient-end));
            background-attachment: fixed;
            min-height: 100vh;
        }

        /* Menu */
        .ifood-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 40px; 
            height: 65px; 
            background: var(--background-light); 
            box-shadow: 0 2px 15px rgba(0,0,0,0.05); 
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            box-sizing: border-box; 
            z-index: 1000;
        }

        .app-logo {
            font-family: 'Playfair Display', serif; 
            font-size: 2em; 
            font-weight: 700;
            color: var(--primary-color); 
            text-decoration: none;
            letter-spacing: 0.5px;
        }

        .action-icons {
            display: flex;
            gap: 15px; 
            align-items: center;
        }

        .action-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--tertiary-color); 
            transition: color 0.2s;
            line-height: 1; 
        }

        .action-icons i {
            font-size: 1.4em; 
        }
        
        .action-icons a:hover {
            color: var(--primary-color);
        }

        .functions-btn {
            background-color: var(--primary-color) !important;
            color: var(--text-light) !important;
            padding: 8px 15px !important; 
            border-radius: 25px !important; 
            font-size: 0.9em;
            font-weight: 600;
        }
        
        .functions-btn i {
            margin-right: 5px;
            font-size: 1.2em;
        }
        
        /* Estilos do Dropdown (Mantidos) */
        .user-container { position: relative; z-index: 1010; }
        .user-dropdown { display: none; position: absolute; top: 100%; right: 0; margin-top: 10px; background: var(--background-light); border-radius: 8px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); min-width: 180px; overflow: hidden; border: 1px solid var(--line-color); }
        .user-container.active .user-dropdown { display: block; }
        .user-dropdown a { padding: 12px 18px; display: block; color: var(--tertiary-color); font-weight: 500; font-size: 0.9em; }
        .user-dropdown a:hover { background-color: var(--gradient-start); color: var(--primary-color); }


        /*
        |==========================================================================
        | 2. ESTILOS DO CONTEÚDO E CARDS (Estrutura final)
        |==========================================================================
        */
        main {
            padding: 40px; 
            max-width: 1400px; 
            margin: 0 auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .categoria-restaurantes {
            width: 100%;
            max-width: 1200px;
            margin-bottom: 50px;
        }
        
        .categoria-restaurantes h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            color: var(--tertiary-color);
            margin-bottom: 25px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--line-color);
            display: flex; 
            align-items: center;
        }
        
        .lista-de-cards {
            display: flex;
            flex-wrap: wrap; 
            gap: 20px; 
            justify-content: flex-start;
        }

        .restaurante-card {
            width: calc(33.333% - 14px); 
            min-width: 280px;
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            background-color: var(--background-light);
            border: 1px solid var(--line-color);
        }
        
        .foto-container img {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }

        .info-e-acoes {
            padding: 15px;
        }

        .botoes-acao {
            display: flex;
            justify-content: space-between; 
            align-items: center;
        }

        .btn-acessar {
            background-color: var(--acessar-btn-bg);
            color: var(--text-light);
            padding: 8px 12px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }
        
<<<<<<< HEAD
        /* Estrela e Botão de Cadastro (Mantidos) */
        .btn-favoritar { border: 1px solid var(--line-color); color: var(--secondary-color); border-radius: 50%; width: 35px; height: 35px; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .btn-favoritar.favorito { color: var(--favoritar-star); border-color: var(--favoritar-star); }
        .card-cadastro { width: 100%; max-width: 1200px; text-align: center; padding: 30px; margin: 40px 0 60px 0; border: 2px dashed var(--primary-color); border-radius: 10px; background-color: #fffaf0; }
        .btn-cadastrar-restaurante { background-color: var(--cadastrar-btn-bg); color: var(--text-light); padding: 12px 25px; border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block; transition: background-color 0.2s; box-shadow: 0 4px 10px rgba(163, 78, 43, 0.3); }
=======
        /* ... dentro da tag <style> em principal.html ... */

.btn-favoritar { 
    border: 1px solid var(--line-color); 
    color: var(--secondary-color); 
    border-radius: 50%; 
    width: 35px; 
    height: 35px; 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    cursor: pointer; 
    transition: color 0.3s ease, border-color 0.3s ease; 
    /* Adicionando transição */
    transition: all 0.3s ease;
}

/* NOVO ESTILO: Garante que a estrela e a borda fiquem amarelas/douradas quando "favorito" */
.btn-favoritar.favorito,
.btn-favoritar.favorito i {
    color: var(--favoritar-star) !important; /* Força a cor amarela/dourada no ícone e no botão */
    border-color: var(--favoritar-star) !important;
}

/* Remove a cor do ícone no estado normal para o ícone padrão */
.btn-favoritar i {
   transition: color 0.3s ease; /* Adiciona transição apenas para a cor do ícone */
}

/* ... o resto do seu CSS ... */
>>>>>>> c670d922536d388f100c5e6f121e5ba9bcf29bc7

        /* Responsividade (Mantida) */
        @media (max-width: 992px) { .restaurante-card { width: calc(50% - 10px); } }
        @media (max-width: 650px) { .restaurante-card { width: 100%; min-width: unset; } .functions-btn span { display: none; } .functions-btn { padding: 10px !important; border-radius: 50% !important; } .functions-btn i { margin-right: 0; } }

    </style>
    
    <nav class="ifood-nav">
        <a href="@{Gerenciamentos.principal2}" class="app-logo">RestApp</a>
        <div class="search-bar"></div> 

        <div class="action-icons">

              <a href="@{Favoritos.index}"  class="functions-btn">
                   <i class="fa-solid fa-house"></i>
                 <span>Favoritos</span>
              </a>
             <a href="@{Gerenciamentos.principal2}" class="functions-btn">
                 <i class="fa-solid fa-house"></i>
                 <span>Início</span>
             </a>
             <a href="@{restaurantes.listar2}" title="Lista de Restaurantes">
                 <i class="fa-solid fa-store-alt"></i>
             </a>
             <div class="user-container" id="userContainer">
                 <a href="#" class="user-icon" onclick="toggleUserDropdown(event)">
                     <i class="fa-solid fa-user"></i>
                 </a>
                 <div class="user-dropdown">
                     <a href="#">Perfil Admin</a>
                     <a href="#">Configurações</a>
                     <a href="#">Sair</a>
                 </div>
             </div>
        </div>
    </nav>
    
<<<<<<< HEAD
    <main>
        <header class="header-content"> 
            <h1>Os Melhores Sabores da Cidade</h1>
            <p class="slogan">Descubra restaurantes por categoria e encontre o seu próximo prato favorito.</p>
        </header>

        <div class="separator"></div>
        
        <div class="categoria-restaurantes">
            <h2><i class="fas fa-pizza-slice"></i> Pizzarias</h2>
            <div class="lista-de-cards">
                
                <div class="restaurante-card">
                    <div class="foto-container">
                        <img src="https://via.placeholder.com/400x160/A34E2B/FFFFFF?text=Pizzaria+Top" alt="Pizzaria do Chef">
                    </div>
                    <div class="info-e-acoes">
                        <h3 class="nome-restaurante">Pizzaria Napolitana Clássica</h3>
                        <div class="botoes-acao">
                            <a href="pagina-rest-1.html" class="btn-acessar">Acessar</a>
                            <button class="btn-favoritar"><i class="far fa-star"></i></button>
                        </div>
                    </div>
                </div>

                <div class="restaurante-card">
                    <div class="foto-container">
                        <img src="https://via.placeholder.com/400x160/A34E2B/FFFFFF?text=Pizzaria+Gourmet" alt="Pizzaria do Chef">
                    </div>
                    <div class="info-e-acoes">
                        <h3 class="nome-restaurante">Fornalha Gourmet</h3>
                        <div class="botoes-acao">
                            <a href="pagina-rest-2.html" class="btn-acessar">Acessar</a>
                            <button class="btn-favoritar favorito"><i class="fas fa-star"></i></button>
                        </div>
                    </div>
                </div>
                
                </div>
        </div>
        
        <div class="categoria-restaurantes">
            <h2><i class="fas fa-fish"></i> Comida Japonesa</h2>
            <div class="lista-de-cards">
            </div>
        </div>

        <div class="card-cadastro">
            <p>Seu restaurante não está aqui? Cadastre-se agora!</p>
            <a href="@{restaurantes.formCadastrarRestaurante}" class="btn-cadastrar-restaurante">Cadastrar Meu Restaurante</a>
        </div>

    </main>
=======
 <main>
    <header class="header-content"> 
        <h1>Os Melhores Sabores da Cidade</h1>
        <p class="slogan">Descubra restaurantes por categoria e encontre o seu próximo prato favorito.</p>
    </header>

    <div class="separator"></div>
    
    <div class="categoria-restaurantes">
        <h2><i class="fas fa-store"></i> Todos os Restaurantes</h2>
        <div class="lista-de-cards">
            
            #{list items:restaurantes, as:'rest'}
            <div class="restaurante-card">
                <div class="foto-container">
                    <img src="https://via.placeholder.com/400x160/A34E2B/FFFFFF?text=${rest.nomeDoRestaurante?.replaceAll(' ', '+') ?: 'Restaurante'}" alt="${rest.nomeDoRestaurante}">
                </div>
                <div class="info-e-acoes">
                    <h3 class="nome-restaurante">${rest.nomeDoRestaurante}</h3>
                    <span class="categoria"><i class="fas fa-tag"></i> ${rest.categoria}</span>
                    
                    <div class="botoes-acao">
                        <a href="#" class="btn-acessar">Acessar</a> 
                        
                        %{
                            // Lógica para verificar se o restaurante já está favoritado
                            isFavorito = clienteConectado != null && clienteConectado.restaurantes.contains(rest);
                        }%

                        #{if clienteConectado}
                            <a href="@{Favoritos.alternarFavorito(rest.id)}" 
   class="btn-favoritar ${isFavorito ? 'favorito' : ''}" 
   title="${isFavorito ? 'Remover dos Favoritos' : 'Adicionar aos Favoritos'}">
    
    <i class="${isFavorito ? 'fas fa-star' : 'far fa-star'}"></i> 
</a>
                        #{/if}
                        #{else}
                            <button class="btn-favoritar" title="Faça login para favoritar" disabled>
                                <i class="far fa-star"></i>
                            </button>
                        #{/else}
                    </div>
                </div>
            </div>
            #{/list}
            
            #{if restaurantes.isEmpty()}
                <p>Nenhum restaurante ativo encontrado.</p>
            #{/if}
            
        </div>
    </div>

    <div class="card-cadastro">
        <p>Seu restaurante não está aqui? Cadastre-se agora!</p>
        <a href="@{restaurantes.formCadastrarRestaurante}" class="btn-cadastrar-restaurante">Cadastrar Meu Restaurante</a>
    </div>

</main>

    
>>>>>>> c670d922536d388f100c5e6f121e5ba9bcf29bc7
    
    <script>
        function toggleUserDropdown(e) {
            e.preventDefault(); 
            const userContainer = e.currentTarget.closest('.user-container');
            userContainer.classList.toggle('active');
            e.stopPropagation(); 
        }

        window.addEventListener('click', function(e){
            const userContainer = document.getElementById('userContainer');
            if(userContainer && !userContainer.contains(e.target)){
                userContainer.classList.remove('active');
            }
        });
    </script>

